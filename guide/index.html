<!DOCTYPE html>
<html>
  <head>
    <title>ГИГАГАЙД ПО ПЕРЕЗАЛИВАНИЮ СТРИМОВ</title>
    <style>
      body {
          background-color: #181818;
          width: 800px;
          margin: 16px auto 0 auto;
          margin-top: 
      }
      
      img {
          width: 600px;
      }

      * {
          font-size: 16px;
          font-family: sans-serif;
          color: #ffffff;
      }

      code, pre {
          font-weight: 200;
          background: rgb(0, 0, 0, 0.4);
          padding: 0 4px;
          border-radius: 8px;
      }
      code, pre,
      code * {
          font-family: monospace;
      }

      pre {
          padding: 8px;
      }

      .warn {
          padding-left: 16px;
          margin: 8px 0;
          border-left: 4px solid rgb(255, 100, 0, 0.4);
      }

      .note {
          padding-left: 16px;
          margin: 8px 0;
          border-left: 4px solid rgb(100, 100, 255, 0.4);
      }

      ul {
          list-style: disc;
      }
    </style>
  </head>
  <body>
    <h1>ГИГАГАЙД ПО ПЕРЕЗАЛИВАНИЮ СТРИМОВ В ТЕЛЕГУ (не только лёхи :wink:)</h1>
    <div class="warn"><p><strong>важно:</strong> читайте, пожалуйста, внимательно<br>также если собираетесь что то делать, прочитайте сначала до конца. спасибо :kiss:</p></div>
    <p>для начала своего пути дата хординга понадобится:</p>
    <ol>
      <li>
        <h2>скачать и настроить vodtool</h2>
        <p>
          vodtool - программа написаная мною для автоматического скачивания, разделения и заливки стримов в телегу<br>
          чтобы это сделать нужно:
        </p>
        <ol>
          <li>
            <h3>скачать сам водтул</h3>
            <p>переходим на <a href="https://github.com/thisisignitedoreo/vodtool/releases/latest">ласт релиз</a> водтула и скачиваем его (для винды файл <code>vodtool-x86_64-windows.exe</code>)<br>
            создаём отдельную папочку где будет находится вся вакханалия, и копируем туда exeшник<br>
            можете переименовать его в <code>vodtool.exe</code> (вам нужно будет вводить это название ручками)</p>
          </li>
          <li>
            <h3>скачать TwitchDownloader</h3>
            <p>водтулу нужна эта программа для скачивания записей чата стримов<br>
            переходим на <a href="https://github.com/lay295/TwitchDownloader/releases/latest">ласт релиз</a> и скачиваем <code>TwitchDownloaderCLI-XXX-Windows-x64</code> <strong>(важно: именно CLI верися)</strong><br>
            распаковывает архив, <strong>&lt;!&gt;</strong> переименовываем в <code>ttvdl.exe</code> и копируем рядом с экзешкой водтула</p>
          </li>
          <li>
            <h3>скачать yt-dlp</h3>
            <p>водтулу нужна эта программа для скачивания самих стримов<br>
            переходим на <a href="https://github.com/yt-dlp/yt-dlp/releases/latest">ласт релиз</a> и скачиваем <code>yt-dlp.exe</code><br>
            и копируем туда же (название оставьте <code>yt-dlp.exe</code>, если качали какую то другую версию то переименуйте)</p>
          </li>
          <li>
            <h3>скачать ffmpeg</h3>
            <p>
              водтулу нужна эта программа для разрезания стримов на куски<br>
              переходим на <a href="https://github.com/BtbN/FFmpeg-Builds/releases/latest">ласт релиз</a> и скачиваем любой <code>win64</code> релиз <em>(он большой)</em><br>
              распаковываем <code>ffmpeg.exe</code> и <code>ffprobe.exe</code> из папки <code>bin</code> и тоже копируем в папку
            </p>
          </li>
        </ol>
        <p>должно получится как то так:</p>
        <img src="ss1.png">
      </li>
      <li>
        <h2>...и начать скачивать стримы</h2>
        <p>
          чтобы начать скачивать сами стримы больше не нужно делать ничего:
        </p>
        <ol>
          <li>
            <h3>открыть коммандную строку в созданной папке</h3>
            <p>введите <code>cmd</code> в проводнике с открытой папкой, или если вы умненький откройте cmd через Win+R и перейдите в папку сами</p>
            <img src="ss2.gif">
            <div class="note">
              <p><strong>имейте ввиду:</strong> всё взаимодействие с водтул - через коммандный интерфейс. <em>ну не сделал я гуи, ну не нужно оно мне было.</em></p>
            </div>
          </li>
          <li>
            <h3>скачать сам стрим</h3>
            <p>
              для скачивания используется субкомманда <code>download</code><br>
              введите <code>vodtool download <em>ССЫЛКА</em></code><br>
              или <code>vodtool download -u <em>АЙДИ ТВИЧ СТРИМА</em></code><br>
              пример: <code>vodtool download https://www.twitch.tv/videos/2480448035</code>
            </p>
            <img src="ss3.gif">
            <div class="warn">
              <p><strong>важно:</strong> иногда yt-dlp падает с вот такой ошибкой:</p>
              <img src="ss4.png">
              <p>и оставляет после себя два файла вот так:</p>
              <img src="ss5.png">
              <p>эту ошибку <em>игнорируем</em>, <code>.temp.mp4</code> файл удаляем и запускаем комманду по новой, водтул сам разберётся</p>
            </div>
            <div class="note">
              <p>
                <strong>имейте ввиду:</strong> после скачивания во время разделения стрима прога нормально так лагает комп, это нормально, терпим, процесс не длинный
              </p>
            </div>
            <p>если в итоге вы увидели что то вроде этого:</p>
            <img src="ss6.png">
            <p>то поздравляю, вы только что скачали свой первый стрим. скопируйте циферку в кавычках после <code>UID</code>, она вам понадобится чтобы работать именно с этим стримом в других коммандах</p>
            <div class="note">
              <p><strong>имейте ввиду:</strong> пока что водтул делит стрим на куски в чуть меньше чем два гига и это нельзя поменять<br>возможно в следующих версиях добавлю флаг чтобы поменять это, а пока можете скачать сурс и поменять цифру <code>2_000_000_000</code> в <code>src/util.zig</code> на что то своё</p>
            </div>
          </li>
          <li>
            <h3>залить стрим в телеграм</h3>
            <p>тут есть два стула: <em>заливать руками</em> или <em>использовать субкоманду <code>upload</code></em></p>
            <ul>
              <li>
                <h4>ручная заливка</h4>
                <p>
                  тут всё просто: вводите комманду <code>vodtool print-chapter-map <em>UID СТРИМА</em></code>, и оно вам выводит все сообщение, думать не нужно, просто копируем и вставляем<br>
                  последнее - текст главного сообщения, всё до этого - подписи к файлам. они сохранены в <code>vods/<em>UID СТРИМА</em>/</code> в папке с программой<br>
                  не забудьте залить запись чата, она отдельным сообщением не выводится, файл <code>vods/<em>UID СТРИМА</em>.json</code> заливаете с подписью <code>[запись чата]</code> (ну или с любой другой с которой хотите)
                </p>
                <img src="ss7.png">
              </li>
              <li>
                <h4>субкомманда <code>upload</code></h4>
                <div class="warn"><strong>важно:</strong> работает <em>только</em> под виндой</div>
                <p>
                  тут сложнее: в телеге левая шторка должна быть свернута в только иконки, открыт канал куда хотите залить<br>
                  открываете консоль и телегу так, чтобы консоль была спереди, но телега была видна<br>
                  фокусируете консоль, вводите <code>vodtool upload <em>UID СТРИМА</em> --post</code> и наводите курсор на телегу (не фокусируете), нажимаете на энтер (запускаете комманду)
                  водтул сам сфокусит телегу и будет заливать стрим по кускам.
                  также можно убирать и добавлять флаги к команде, вот их список:
                </p>
                <ul>
                  <li><code>--post</code> - перед залитием кусков написать главный пост и перейти в комментарии</li>
                  <li><code>--no-chat</code> - не заливать чат</li>
                  <li><code>--from-chunk <em>НОМЕР КУСКА</em></code> - начать заливать с определённого куска</li>
                </ul>
                <p>
                  примеры:
                </p>
                <ul>
                  <li><code>upload XXX --post</code> - написать пост, перейти в комменты и залить стрим с записью чата</li>
                  <li><code>upload XXX --no-chat</code> - залить стрим без записи чата</li>
                  <li><code>upload XXX --no-chat --from-chunk 4</code> - залить стрим без чата с 4 куска включительно</li>
                </ul>
                <div class="note"><p>у меня нету примеров, меня забанили в телеге(</p></div>
              </li>
            </ul>
          </li>
        </ol>
      </li>
    </ol>
    <h2>ЧаВо и полезные гайды:</h2>
    <ul>
      <li>
        <h3>как заливать стримы не на твиче? (киноауки)</h3>
        <p>
          итак, перво-наперво нужно раздобыть саму запись стрима. это можно делать на сайте streamrecorder (не платя деньги только 720p), через сторонние утилиты, от друга записавшего стрим во время прямого эфира, и т.д.<br>
          после того как нашли запись (обязательно в формате <code>.mp4</code>, можете погуглить как конвертировать через скачанный ранее ffmpeg) скопируйте её в папку <code>vods</code> которая создалась после первого запуска (или можете её сами создать)<br>
          если скачивали стрим со streamrecorder в сразу много кусков разных названий и категорий, воспользуйтесь <a href="https://shotstack.io/learn/use-ffmpeg-to-concatenate-video/">например, этим</a> гайдом по конвертации<br>
          после этого переименуйте её в более удобное имя (например <code>kinoauk24.mp4</code>).
          создайте файл <code><em>UID СТРИМА</em>.cat.txt</code> (например <code>kinoauk24.cat.txt</code>), и напишите его по этому шаблону:
        </p>
        <pre>2024-03-22 Крутой стрим который удалили с твича
324 Just Chatting
683 A Difficult Game About Climbing
923 Balatro</pre>
        <p>
          цифры перед категориями - их длинна в секундах (ну сами посчитаете, не тупые же), если категории неизвестны то оставьте только первую строку.<br>
          следом запустите эту комманду: <code>vodtool categorize <em>UID СТРИМА</em></code> (например <code>vodtool categorize kinoauk24</code>)<br>
          дальше можете заливать стрим в телегу по гайду выше (UID стрима в этом случае - название записи без расширения)
        </p>
        <div class="note">
          <p><strong>хорошая практика:</strong> если будете заливать стрим в более низком качестве чем сурс - как нибудь подписывайте его</p>
        </div>
      </li>
      <li>
        <h3>как заливать стримы с ютуба?</h3>
        <p>пока никак :)</p>
      </li>
      <li>
        <h3>что из скачаного стрима можно удалить после залития в телегу?</h3>
        <p>да хоть папку <code>vods</code> целиком</p>
      </li>
      <li>
        <h3>у тебя был удобный сайт с записями. можно как то туда добавить стримы что залил я?</h3>
        <p>неа, но я сейчас немного его перерабатываю чтобы можно было просто скопировать его и начать вставлять ссылки на другие каналы, когда доделаю - обновлю эту часть гайда. кстати - если будете заливать стримы лёхи, то не удалять мои залитые стримы, а просто дополнять с другими ссылками для целостности архива :^)</p>
      </li>
    </ul>
    <h1>поздравляю, теперь ты дата хоардер. похвастайся маме, она оценит :)</h1>
    <hr>
    <p>
      спасибо всем за поддержку на всём пути oleshavods. без вас я не знаю что бы делал.<br>
      если что то непонятно - не стесняйтесь писать мне в телегу (пока нема, жду номер)<br>
      если действительно будете заливать стримы, начинайте с тех что я не залил последними, чтобы сохранить целостноть архива<br>
      а еще если будете что то заливать, можете мне скинуть, мы порекламим, могу даже дать пару советов если чо, да и мне самому просто интересно :)<br>
      спасибо всем кто решит продолжить моё дело, это правда много для меня значит
    </p>
  </body>
</html>
